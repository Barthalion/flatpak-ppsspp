{
  "app-id": "org.ppsspp.PPSSPP",
  "branch": "master",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "1.4",
  "sdk": "org.freedesktop.Sdk",
  "command": "ppsspp",
  "rename-desktop-file": "ppsspp.desktop",
  "rename-icon": "ppsspp",
  "rename-appdata-file": "ppsspp.xml",
  "tags": ["nightly"],
  "desktop-file-name-suffix": " (nightly)",
  "finish-args": [
    "--filesystem=home:ro",
    "--share=network",
    "--socket=pulseaudio",
    "--socket=x11"
  ],
  "modules": [
    "dependencies/sdl2-2.0.5.json",
    "dependencies/glu-9.0.0.json",
    {
      "name": "ppsspp",
      "buildsystem": "cmake",
      "post-install": [],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/hrydgard/ppsspp.git",
          "branch": "2cf3f0247a246bde2c07cb662255b6ff87ece811"
        },
        {
          "type": "patch",
          "path": "ppsspp-install.patch"
        },
        {
          "type": "patch",
          "path": "ppsspp-revert-cmake-bump.patch"
        },
        {
          "type": "script",
          "dest-filename": "install.sh",
          "commands": [
            "set -x",
            "mkdir -p /app/ppsspp /app/bin",
            "install -m755 PPSSPPSDL /app/ppsspp/",
            "cp -dr assets /app/ppsspp/",
            "install -Dm644 icons/icon-512.svg /app/share/icons/hicolor/scalable/apps/ppsspp.svg",
            "ln -s /app/ppsspp/PPSSPPSDL /app/bin/ppsspp"
          ]
        },
        {
          "type": "file",
          "path": "ppsspp.desktop"
        },
        {
          "type": "file",
          "path": "appdata.xml"
        }
      ],
      "post-install": [
        "install -Dm644 appdata.xml /app/share/appdata/ppsspp.appdata.xml",
        "install -Dm644 ppsspp.desktop /app/share/applications/ppsspp.desktop"
      ]
    }
  ]
}
